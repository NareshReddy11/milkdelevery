<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Login - Shanthi Farms</title>
    <link rel="stylesheet" href="/style.css"/>
</head>
<body class="login-page">
<div class="container">
    <img src="/logo.png" class="logo" alt="Shanthi Farms Logo"/>
    <div class="brand">Login</div>
    <div class="welcome">Welcome! Please login to continue.</div>

    <!-- Phone Form -->
    <form method="post" action="/auth/send-otp" th:if="${param.phone} == null" style="width:100%">
        <div class="input-group">
            <span class="input-icon">
                <svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 16.5C4 15.1193 5.11929 14 6.5 14H13.5C14.8807 14 16 15.1193 16 16.5V17C16 17.5523 15.5523 18 15 18H5C4.44772 18 4 17.5523 4 17V16.5Z" stroke="white" stroke-width="1.5"/><rect x="6" y="3" width="8" height="6" rx="3" stroke="white" stroke-width="1.5"/></svg>
            </span>
            <input id="phone" class="input" name="phone" placeholder="Mobile Number"
                   required pattern="[0-9]{10}" maxlength="10" inputmode="numeric"
                   oninput="this.value=this.value.replace(/[^0-9]/g,'')"/>
        </div>
        <div class="input-group">
            <span class="input-icon">
                <svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="7" r="4" stroke="white" stroke-width="1.5"/><path d="M2 17C2 13.6863 5.13401 11 9 11H11C14.866 11 18 13.6863 18 17" stroke="white" stroke-width="1.5"/></svg>
            </span>
            <input id="name" class="input" name="name" placeholder="Full Name" required/>
        </div>
        <button class="button" type="submit">Get OTP</button>
    </form>

    <!-- OTP Form -->
    <form method="post" action="/auth/verify-otp" th:if="${param.phone} != null" style="width:100%">
        <div class="input-group">
            <span class="input-icon">
                <svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="8" width="12" height="8" rx="2" stroke="white" stroke-width="1.5"/><path d="M10 12V14" stroke="white" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <input id="otp" class="input" name="otp" placeholder="OTP" required maxlength="6"/>
        </div>
        <input type="hidden" name="phone" th:value="${param.phone}"/>
        <input type="hidden" name="name" th:value="${param.name}"/>
        <input type="hidden" name="address" th:value="${param.address}"/>
        <button class="button" type="submit">Verify</button>
        <div style="margin-top:10px;" th:if="${param.phone != null}">
            <a th:href="@{/auth/send-otp(phone=${param.phone})}" style="color:#e0e7ef;text-decoration:underline;">Resend OTP</a>
        </div>
    </form>

    <div class="footer">Â© 2025 Shanthi Farms</div>
</div>
</body>
</html>
